function cov_v3svesnlq(){var path="/home/raposo/projects/testesnodejs/04-coverage-e2e/api.js";var hash="51519b7897f164eb7164d8c12ca8b1494aa0e6de";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/raposo/projects/testesnodejs/04-coverage-e2e/api.js",statementMap:{"0":{start:{line:1,column:13},end:{line:1,column:28}},"1":{start:{line:2,column:21},end:{line:2,column:65}},"2":{start:{line:3,column:15},end:{line:29,column:1}},"3":{start:{line:5,column:8},end:{line:5,column:41}},"4":{start:{line:6,column:8},end:{line:6,column:29}},"5":{start:{line:10,column:8},end:{line:23,column:9}},"6":{start:{line:11,column:25},end:{line:11,column:41}},"7":{start:{line:12,column:12},end:{line:19,column:13}},"8":{start:{line:16,column:14},end:{line:16,column:37}},"9":{start:{line:17,column:14},end:{line:17,column:47}},"10":{start:{line:18,column:14},end:{line:18,column:35}},"11":{start:{line:21,column:12},end:{line:21,column:52}},"12":{start:{line:22,column:12},end:{line:22,column:33}},"13":{start:{line:26,column:8},end:{line:26,column:38}},"14":{start:{line:27,column:8},end:{line:27,column:30}},"15":{start:{line:31,column:16},end:{line:40,column:1}},"16":{start:{line:32,column:28},end:{line:32,column:35}},"17":{start:{line:33,column:21},end:{line:33,column:53}},"18":{start:{line:34,column:19},end:{line:34,column:53}},"19":{start:{line:36,column:4},end:{line:38,column:6}},"20":{start:{line:39,column:4},end:{line:39,column:36}},"21":{start:{line:42,column:12},end:{line:43,column:72}},"22":{start:{line:43,column:36},end:{line:43,column:71}},"23":{start:{line:45,column:0},end:{line:45,column:20}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:4,column:20},end:{line:4,column:21}},loc:{start:{line:4,column:43},end:{line:7,column:5}},line:4},"1":{name:"(anonymous_1)",decl:{start:{line:8,column:19},end:{line:8,column:20}},loc:{start:{line:8,column:47},end:{line:24,column:5}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:25,column:13},end:{line:25,column:14}},loc:{start:{line:25,column:36},end:{line:28,column:5}},line:25},"3":{name:"(anonymous_3)",decl:{start:{line:31,column:16},end:{line:31,column:17}},loc:{start:{line:31,column:45},end:{line:40,column:1}},line:31},"4":{name:"(anonymous_4)",decl:{start:{line:43,column:30},end:{line:43,column:31}},loc:{start:{line:43,column:36},end:{line:43,column:71}},line:43}},branchMap:{"0":{loc:{start:{line:12,column:12},end:{line:19,column:13}},type:"if",locations:[{start:{line:12,column:12},end:{line:19,column:13}},{start:{line:12,column:12},end:{line:19,column:13}}],line:12},"1":{loc:{start:{line:13,column:16},end:{line:14,column:55}},type:"binary-expr",locations:[{start:{line:13,column:16},end:{line:13,column:55}},{start:{line:14,column:16},end:{line:14,column:55}}],line:13},"2":{loc:{start:{line:34,column:19},end:{line:34,column:53}},type:"binary-expr",locations:[{start:{line:34,column:19},end:{line:34,column:35}},{start:{line:34,column:39},end:{line:34,column:53}}],line:34}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0],"1":[0,0],"2":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"51519b7897f164eb7164d8c12ca8b1494aa0e6de"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_v3svesnlq=function(){return actualCoverage;};}return actualCoverage;}cov_v3svesnlq();const http=(cov_v3svesnlq().s[0]++,require('http'));const DEFAULT_USER=(cov_v3svesnlq().s[1]++,{username:"AlvaroRaposo",password:"123"});const routes=(cov_v3svesnlq().s[2]++,{'/contact:get':(request,response)=>{cov_v3svesnlq().f[0]++;cov_v3svesnlq().s[3]++;response.write('contact us page');cov_v3svesnlq().s[4]++;return response.end();},'/login:post':async(request,response)=>{cov_v3svesnlq().f[1]++;cov_v3svesnlq().s[5]++;// response Ã© um iterator!
for await(const data of request){const user=(cov_v3svesnlq().s[6]++,JSON.parse(data));cov_v3svesnlq().s[7]++;if((cov_v3svesnlq().b[1][0]++,user.username!==DEFAULT_USER.username)||(cov_v3svesnlq().b[1][1]++,user.password!==DEFAULT_USER.password)){cov_v3svesnlq().b[0][0]++;cov_v3svesnlq().s[8]++;response.writeHead(401);cov_v3svesnlq().s[9]++;response.write("Logging failed!");cov_v3svesnlq().s[10]++;return response.end();}else{cov_v3svesnlq().b[0][1]++;}cov_v3svesnlq().s[11]++;response.write("Logging has succeeded!");cov_v3svesnlq().s[12]++;return response.end();}},default:(request,response)=>{cov_v3svesnlq().f[2]++;cov_v3svesnlq().s[13]++;response.write('Hello World!');cov_v3svesnlq().s[14]++;return response.end();}});cov_v3svesnlq().s[15]++;const handler=function(request,response){cov_v3svesnlq().f[3]++;const{url,method}=(cov_v3svesnlq().s[16]++,request);const routeKey=(cov_v3svesnlq().s[17]++,`${url}:${method.toLowerCase()}`);const chosen=(cov_v3svesnlq().s[18]++,(cov_v3svesnlq().b[2][0]++,routes[routeKey])||(cov_v3svesnlq().b[2][1]++,routes.default));cov_v3svesnlq().s[19]++;response.writeHead(200,{'Content-Type':'text/html'});cov_v3svesnlq().s[20]++;return chosen(request,response);};const app=(cov_v3svesnlq().s[21]++,http.createServer(handler).listen(3000,()=>{cov_v3svesnlq().f[4]++;cov_v3svesnlq().s[22]++;return console.log('app running at',3000);}));cov_v3svesnlq().s[23]++;module.exports=app;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS5qcyJdLCJuYW1lcyI6WyJodHRwIiwicmVxdWlyZSIsIkRFRkFVTFRfVVNFUiIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJyb3V0ZXMiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJ3cml0ZSIsImVuZCIsImRhdGEiLCJ1c2VyIiwiSlNPTiIsInBhcnNlIiwid3JpdGVIZWFkIiwiZGVmYXVsdCIsImhhbmRsZXIiLCJ1cmwiLCJtZXRob2QiLCJyb3V0ZUtleSIsInRvTG93ZXJDYXNlIiwiY2hvc2VuIiwiYXBwIiwiY3JlYXRlU2VydmVyIiwibGlzdGVuIiwiY29uc29sZSIsImxvZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJtNkdBZVk7eUZBZlosS0FBTUEsQ0FBQUEsSUFBSSx5QkFBR0MsT0FBTyxDQUFDLE1BQUQsQ0FBVixDQUFWLENBQ0EsS0FBTUMsQ0FBQUEsWUFBWSx5QkFBRyxDQUFFQyxRQUFRLENBQUUsY0FBWixDQUE0QkMsUUFBUSxDQUFFLEtBQXRDLENBQUgsQ0FBbEIsQ0FDQSxLQUFNQyxDQUFBQSxNQUFNLHlCQUFHLENBQ1gsZUFBZ0IsQ0FBQ0MsT0FBRCxDQUFVQyxRQUFWLEdBQXVCLCtDQUNuQ0EsUUFBUSxDQUFDQyxLQUFULENBQWUsaUJBQWYsRUFEbUMsdUJBRW5DLE1BQU9ELENBQUFBLFFBQVEsQ0FBQ0UsR0FBVCxFQUFQLENBQ0gsQ0FKVSxDQUtYLGNBQWUsTUFBTUgsT0FBTixDQUFlQyxRQUFmLEdBQTRCLCtDQUN2QztBQUNBLFVBQVcsS0FBTUcsQ0FBQUEsSUFBakIsR0FBeUJKLENBQUFBLE9BQXpCLENBQWtDLENBQzlCLEtBQU1LLENBQUFBLElBQUkseUJBQUdDLElBQUksQ0FBQ0MsS0FBTCxDQUFXSCxJQUFYLENBQUgsQ0FBVixDQUQ4Qix1QkFFOUIsR0FDSSwyQkFBQUMsSUFBSSxDQUFDUixRQUFMLEdBQWtCRCxZQUFZLENBQUNDLFFBQS9CLDhCQUNBUSxJQUFJLENBQUNQLFFBQUwsR0FBa0JGLFlBQVksQ0FBQ0UsUUFEL0IsQ0FESixDQUdFLGtEQUNBRyxRQUFRLENBQUNPLFNBQVQsQ0FBbUIsR0FBbkIsRUFEQSx1QkFFQVAsUUFBUSxDQUFDQyxLQUFULENBQWUsaUJBQWYsRUFGQSx3QkFHQSxNQUFPRCxDQUFBQSxRQUFRLENBQUNFLEdBQVQsRUFBUCxDQUNELENBUEQsZ0NBRjhCLHdCQVc5QkYsUUFBUSxDQUFDQyxLQUFULENBQWUsd0JBQWYsRUFYOEIsd0JBWTlCLE1BQU9ELENBQUFBLFFBQVEsQ0FBQ0UsR0FBVCxFQUFQLENBQ0gsQ0FDSixDQXJCVSxDQXNCWE0sT0FBTyxDQUFFLENBQUNULE9BQUQsQ0FBVUMsUUFBVixHQUF1QixnREFDNUJBLFFBQVEsQ0FBQ0MsS0FBVCxDQUFlLGNBQWYsRUFENEIsd0JBRTVCLE1BQU9ELENBQUFBLFFBQVEsQ0FBQ0UsR0FBVCxFQUFQLENBQ0gsQ0F6QlUsQ0FBSCxDQUFaLEMsd0JBNEJBLEtBQU1PLENBQUFBLE9BQU8sQ0FBRyxTQUFVVixPQUFWLENBQW1CQyxRQUFuQixDQUE2Qix3QkFDekMsS0FBTSxDQUFFVSxHQUFGLENBQU9DLE1BQVAsMkJBQWtCWixPQUFsQixDQUFOLENBQ0EsS0FBTWEsQ0FBQUEsUUFBUSwwQkFBSSxHQUFFRixHQUFJLElBQUdDLE1BQU0sQ0FBQ0UsV0FBUCxFQUFxQixFQUFsQyxDQUFkLENBQ0EsS0FBTUMsQ0FBQUEsTUFBTSwwQkFBRywyQkFBQWhCLE1BQU0sQ0FBQ2MsUUFBRCxDQUFOLDhCQUFvQmQsTUFBTSxDQUFDVSxPQUEzQixDQUFILENBQVosQ0FIeUMsd0JBS3pDUixRQUFRLENBQUNPLFNBQVQsQ0FBbUIsR0FBbkIsQ0FBd0IsQ0FDbkIsZUFBZ0IsV0FERyxDQUF4QixFQUx5Qyx3QkFRekMsTUFBT08sQ0FBQUEsTUFBTSxDQUFDZixPQUFELENBQVVDLFFBQVYsQ0FBYixDQUNILENBVEQsQ0FXQSxLQUFNZSxDQUFBQSxHQUFHLDBCQUFHdEIsSUFBSSxDQUFDdUIsWUFBTCxDQUFrQlAsT0FBbEIsRUFDS1EsTUFETCxDQUNZLElBRFosQ0FDa0IsSUFBTSxzREFBQUMsQ0FBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVksZ0JBQVosQ0FBOEIsSUFBOUIsRUFBbUMsQ0FEM0QsQ0FBSCxDQUFULEMsd0JBR0FDLE1BQU0sQ0FBQ0MsT0FBUCxDQUFpQk4sR0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBodHRwID0gcmVxdWlyZSgnaHR0cCcpXG5jb25zdCBERUZBVUxUX1VTRVIgPSB7IHVzZXJuYW1lOiBcIkFsdmFyb1JhcG9zb1wiLCBwYXNzd29yZDogXCIxMjNcIn1cbmNvbnN0IHJvdXRlcyA9IHtcbiAgICAnL2NvbnRhY3Q6Z2V0JzogKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIHJlc3BvbnNlLndyaXRlKCdjb250YWN0IHVzIHBhZ2UnKVxuICAgICAgICByZXR1cm4gcmVzcG9uc2UuZW5kKClcbiAgICB9LFxuICAgICcvbG9naW46cG9zdCc6IGFzeW5jKHJlcXVlc3QsIHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIC8vIHJlc3BvbnNlIMOpIHVtIGl0ZXJhdG9yIVxuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IGRhdGEgb2YgcmVxdWVzdCkge1xuICAgICAgICAgICAgY29uc3QgdXNlciA9IEpTT04ucGFyc2UoZGF0YSlcbiAgICAgICAgICAgIGlmKFxuICAgICAgICAgICAgICAgIHVzZXIudXNlcm5hbWUgIT09IERFRkFVTFRfVVNFUi51c2VybmFtZSB8fFxuICAgICAgICAgICAgICAgIHVzZXIucGFzc3dvcmQgIT09IERFRkFVTFRfVVNFUi5wYXNzd29yZFxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIHJlc3BvbnNlLndyaXRlSGVhZCg0MDEpXG4gICAgICAgICAgICAgIHJlc3BvbnNlLndyaXRlKFwiTG9nZ2luZyBmYWlsZWQhXCIpICAgXG4gICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5lbmQoKVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNwb25zZS53cml0ZShcIkxvZ2dpbmcgaGFzIHN1Y2NlZWRlZCFcIilcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5lbmQoKVxuICAgICAgICB9XG4gICAgfSxcbiAgICBkZWZhdWx0OiAocmVxdWVzdCwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgcmVzcG9uc2Uud3JpdGUoJ0hlbGxvIFdvcmxkIScpXG4gICAgICAgIHJldHVybiByZXNwb25zZS5lbmQoKTtcbiAgICB9XG59XG5cbmNvbnN0IGhhbmRsZXIgPSBmdW5jdGlvbiAocmVxdWVzdCwgcmVzcG9uc2UpIHtcbiAgICBjb25zdCB7IHVybCwgbWV0aG9kIH0gPSByZXF1ZXN0XG4gICAgY29uc3Qgcm91dGVLZXkgPSBgJHt1cmx9OiR7bWV0aG9kLnRvTG93ZXJDYXNlKCl9YFxuICAgIGNvbnN0IGNob3NlbiA9IHJvdXRlc1tyb3V0ZUtleV0gfHwgcm91dGVzLmRlZmF1bHRcbiAgICBcbiAgICByZXNwb25zZS53cml0ZUhlYWQoMjAwLCB7IFxuICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2h0bWwnXG4gICAgfSlcbiAgICByZXR1cm4gY2hvc2VuKHJlcXVlc3QsIHJlc3BvbnNlKVxufVxuXG5jb25zdCBhcHAgPSBodHRwLmNyZWF0ZVNlcnZlcihoYW5kbGVyKVxuICAgICAgICAgICAgICAgIC5saXN0ZW4oMzAwMCwgKCkgPT4gY29uc29sZS5sb2coJ2FwcCBydW5uaW5nIGF0JywgMzAwMCkpXG5cbm1vZHVsZS5leHBvcnRzID0gYXBwIl19